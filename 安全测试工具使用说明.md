# 安全测试工具集成使用说明

## 概述

我们成功在Claudia项目中集成了安全测试工具支持。目前已实现了**nmap**网络扫描工具作为概念验证，并建立了完整的架构框架以支持更多安全测试工具。

## 已实现功能

### 1. Nmap网络扫描工具

- **功能**: 网络发现和安全审计
- **后端实现**: `src-tauri/src/commands/pentest.rs`
- **前端组件**: `NmapWidget` in `src/components/ToolWidgets.tsx`
- **API接口**: `api.executeNmap()` in `src/lib/api.ts`

### 2. 安全特性

- **目标验证**: 自动检查扫描目标是否为合法的内网地址
- **安全警告**: 实时显示潜在的安全风险和合规提醒
- **权限控制**: 集成现有的Tauri权限系统
- **审计日志**: 记录所有工具使用情况

### 3. UI功能

- **实时输出**: 扫描过程中实时显示结果
- **结果解析**: 智能解析nmap输出，提取主机和端口信息
- **错误处理**: 完整的错误状态显示和处理
- **响应式设计**: 适配现有的UI主题和样式

## 使用方法

### 在Claude Code中使用

可以通过以下方式调用nmap扫描：

```javascript
// 基本扫描
await api.executeNmap("127.0.0.1");

// 带选项的扫描
await api.executeNmap("192.168.1.1", "-sV -T4 --open");

// 扫描内网段
await api.executeNmap("10.0.0.0/24", "-sn");
```

### 安全注意事项

1. **仅限内网**: 工具会验证目标是否为私有IP范围
2. **授权扫描**: 确保已获得网络管理员许可
3. **合规使用**: 遵守相关法律法规和公司政策
4. **资源控制**: 避免在生产环境进行大规模扫描

## 扩展架构

项目已建立完整的架构框架，可轻松添加更多安全测试工具：

### 1. 后端扩展
- 在`pentest.rs`中添加新的工具函数
- 实现统一的结果格式和错误处理
- 集成工具安装检查和验证

### 2. 前端扩展
- 创建对应的Widget组件
- 在`StreamMessage.tsx`中注册工具
- 添加工具图标和样式

### 3. 已规划的工具
- **dirsearch**: Web目录扫描
- **nikto**: Web漏洞扫描
- **nuclei**: 基于模板的漏洞检测
- **sqlmap**: SQL注入检测

## 开发说明

### 文件结构
```
src-tauri/src/commands/pentest.rs  # 后端工具实现
src/components/ToolWidgets.tsx     # 前端Widget组件
src/components/StreamMessage.tsx   # 工具注册和消息处理
src/lib/api.ts                    # API接口定义
```

### 测试方法
1. 确保nmap已安装在系统中
2. 启动Claudia应用
3. 在Claude Code中输入扫描命令
4. 观察实时输出和结果解析

## 安全提醒

⚠️ **重要**: 这些工具仅用于授权的安全测试和网络诊断。未经授权扫描其他网络可能违反法律法规。使用前请确保：

1. 已获得网络所有者明确授权
2. 遵守当地法律法规
3. 符合公司安全政策
4. 在受控环境中进行测试

## 后续计划

1. **完善nmap功能**: 添加更多扫描选项和结果解析
2. **实现更多工具**: 按优先级逐步添加其他安全测试工具
3. **增强安全控制**: 添加更严格的权限验证和审计功能
4. **优化用户体验**: 改进UI交互和结果可视化

通过这个集成，安全专业人员可以在Claudia环境中高效地进行网络安全评估，同时保持良好的安全实践和合规性。 